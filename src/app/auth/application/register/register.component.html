<div class="centered-content">
  <mat-card>
    <mat-card-title>Inscription</mat-card-title>
    <mat-card-content>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <mat-form-field>
          <mat-label>Nom d'utilisateur</mat-label>
          <input matInput formControlName="userName" />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Prénom</mat-label>
          <input matInput formControlName="firstName" />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Nom de famille</mat-label>
          <input matInput formControlName="lastName" />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Mot de passe</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Confirmer le mot de passe</mat-label>
          <input
            matInput
            type="password"
            formControlName="confirmPassword"
            (input)="checkPassword()" />
          <mat-error
            *ngIf="registerForm.controls['confirmPassword'].errors?.['passwordDoesNotMatch'] && registerForm.controls['confirmPassword'].dirty">
            Les mots de passe ne correspondent pas.
          </mat-error>
        </mat-form-field>

        <div *ngIf="isLoading; else registerButton">
          <mat-spinner [diameter]="35"></mat-spinner>
        </div>
        <ng-template #registerButton>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="registerForm.invalid">
            Créer un compte
          </button>
        </ng-template>

        <div class="link">
          <p>Vous avez déjà un compte ? <a href="/login">Se connecter</a></p>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
